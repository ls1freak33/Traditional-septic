<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Construction Estimator</title>

<style>
body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
}

.container {
    max-width: 650px;
    margin: auto;
    padding: 15px;
    border: 2px solid #facc15;
    border-radius: 14px;
    background: #050505;
}

h1 {
    text-align: center;
    color: #facc15;
    font-size: 32px;
    margin-bottom: 20px;
}

.section {
    border: 1px solid #facc15;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 16px;
    background: #0b0b0b;
}

.section-title {
    color: #facc15;
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
}

input, select {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: #000;
    border: 1px solid #facc15;
    border-radius: 6px;
    color: #fff;
    font-size: 15px;
}

button {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 10px;
}

.btn-yellow { background: #facc15; color: #000; }
.btn-green { background: #22c55e; color: #000; }

.total {
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    color: #facc15;
    margin-top: 15px;
}
</style>
</head>

<body>

<div class="container">

<h1>SEPTIC SYSTEM ESTIMATOR</h1>

<div class="section">
    <div class="section-title">Job Info</div>
    <input id="customerName" placeholder="Customer Name">
    <input id="jobLocation" placeholder="Job Location">
</div>

<div class="section">
    <div class="section-title">System Type</div>
    <select id="systemType">
        <option value="conventional">Conventional Septic</option>
        <option value="chamber">Chamber Septic</option>
    </select>
</div>

<div class="section">
    <div class="section-title">System Details</div>
    <input id="tankCost" type="number" placeholder="Tank Cost ($)">
    <input id="fieldLength" type="number" placeholder="Field Line Length (ft)">
    <input id="pipeCost" type="number" placeholder="Pipe Cost per ft ($)">
</div>

<div class="section">
    <div class="section-title">Rock (Hauled In)</div>
    <input id="rockTons" type="number" placeholder="Rock Tons">
    <input id="rockCost" type="number" value="17" placeholder="Cost per Ton ($)">
</div>

<div class="section">
    <div class="section-title">Hauling</div>
    <input id="haulDistance" type="number" placeholder="Miles One Way">
    <input id="haulRate" type="number" placeholder="Haul Cost (cents per mile)">
</div>

<div class="section">
    <div class="section-title">Tree Clearing (if needed)</div>
    <input id="treeCount" type="number" placeholder="Tree Count">
    <select id="treeSize">
        <option value="0">Select Tree Size</option>
        <option value="500">Small</option>
        <option value="1000">Medium</option>
        <option value="1500">Large</option>
    </select>
</div>

<div class="section">
    <div class="section-title">Labor / Site Work</div>
    <input id="laborBase" type="number" placeholder="Base Labor Cost ($)">
    <input id="markupPercent" type="number" placeholder="Markup %">
</div>

<button class="btn-yellow" onclick="calculateTotal()">CALCULATE TOTAL</button>
<button class="btn-green" onclick="generateQuote()">GENERATE CUSTOMER QUOTE</button>

<div class="total" id="totalOutput">$0.00</div>

</div>

<script>
function val(id) {
    return parseFloat(document.getElementById(id).value) || 0;
}

function calculateTotal() {

    let tank = val("tankCost");
    let field = val("fieldLength");
    let pipe = val("pipeCost");
    let rockTons = val("rockTons");
    let rockCost = val("rockCost");
    let haulMiles = val("haulDistance");
    let haulRate = val("haulRate");
    let trees = val("treeCount");
    let treeSize = val("treeSize");
    let labor = val("laborBase");
    let markup = val("markupPercent");

    let systemType = document.getElementById("systemType").value;

    let pipeTotal = field * pipe;
    let rockTotal = rockTons * rockCost;
    let haulTotal = (haulMiles * 2) * (haulRate / 100);
    let treeTotal = trees * treeSize;

    // Chamber adjustments
    if (systemType === "chamber") {
        rockTotal = 0;
        labor = labor * 0.85; // 15% labor reduction
    }

    let subtotal = tank + pipeTotal + rockTotal + haulTotal + treeTotal + labor;
    let total = subtotal + (subtotal * (markup / 100));

    document.getElementById("totalOutput").innerText = "$" + total.toFixed(2);
}

function generateQuote() {
    calculateTotal();

    let total = parseFloat(document.getElementById("totalOutput").innerText.replace("$",""));
    let deposit = total >= 10000 ? total * 0.15 : 0;

    let win = window.open("", "_blank");
    win.document.write(`
        <h1>Crestview Construction LLC</h1>
        <p><strong>Total:</strong> $${total.toFixed(2)}</p>
        <p><strong>Deposit:</strong> $${deposit.toFixed(2)}</p>
        <p>${total >= 10000 ? "Progress payments apply." : "Payment due upon completion."}</p>
        <script>window.print();</script>
    `);
}
</script>

</body>
</html>